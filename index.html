<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CampusCare</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

    body {
      font-family: 'Poppins', sans-serif;
      background-color: #F0F4F8; /* Light Gray Blue */
      color: #1F2937; /* Dark Gray */
    }

    .main-bg { background-color: #6B46C1; } /* Deep Purple */
    .main-text { color: #6B46C1; }
    .main-border { border-color: #6B46C1; }

    .card-shadow { box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1-px rgba(0, 0, 0, 0.06); }
    .emergency-button {
      background-color: #DC2626; /* Red */
      color: white;
      transition: transform 0.2s;
    }
    .emergency-button:hover { transform: scale(1.05); }

    /* Custom scrollbar for chat */
    .chat-container::-webkit-scrollbar { width: 8px; }
    .chat-container::-webkit-scrollbar-track { background: #E5E7EB; }
    .chat-container::-webkit-scrollbar-thumb {
      background-color: #6B46C1;
      border-radius: 4px;
      border: 2px solid #F0F4F8;
    }
    
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, minmax(0, 1fr));
      gap: 0.5rem;
    }

    .calendar-day {
      width: 4rem;
      height: 4rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      border-radius: 0.5rem;
      transition: all 0.2s ease-in-out;
    }
    .calendar-day.clickable:hover {
      background-color: #6B46C1;
      color: white;
      transform: translateY(-2px);
      cursor: pointer;
    }
    .calendar-day.selected {
      background-color: #6B46C1 !important;
      color: white !important;
      font-weight: 600;
      border: 2px solid #6B46C1;
    }
    
    .checked-in-day {
      background-color: #4CAF50; /* Green color for checked-in days */
      color: white;
      font-weight: bold;
    }

    .message-modal-bg {
      background-color: rgba(0, 0, 0, 0.5);
    }
    @media (max-width: 768px) {
      .flex-col-mobile {
        flex-direction: column;
      }
      .w-64-mobile {
        width: 100%;
        height: auto;
      }
      .p-8-mobile {
        padding: 2rem;
      }
    }
  </style>
</head>
<body class="flex flex-col md:flex-row h-screen">

  <aside id="sidebar" class="w-full md:w-64 md:h-full main-bg text-white p-6 shadow-lg flex flex-col items-center">
    <div class="flex items-center justify-between w-full md:justify-center md:mb-8 mt-4">
      <div class="w-16 h-16 md:w-20 md:h-20 rounded-full bg-gray-300 flex items-center justify-center border-2 border-white">
        <svg class="w-10 h-10 md:w-12 md:h-12 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z">
          </path>
        </svg>
      </div>
      <button id="toggle-menu" class="md:hidden p-2 rounded-md focus:outline-none">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path d="M4 6h16M4 12h16m-7 6h7"></path>
        </svg>
      </button>
    </div>
    <nav id="nav-menu" class="flex-1 w-full hidden md:block">
      <ul class="space-y-4">
        <li><a href="#" class="nav-link flex items-center p-2 rounded-lg hover:bg-gray-700/50" data-page="home-page">
          <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6">
            </path>
          </svg>
          Home
        </a></li>
        <li><a href="#" class="nav-link flex items-center p-2 rounded-lg hover:bg-gray-700/50" data-page="ai-chat-page">
          <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z">
            </path>
          </svg>
          AI Chat
        </a></li>
        <li><a href="#" class="nav-link flex items-center p-2 rounded-lg hover:bg-gray-700/50" data-page="book-session-page">
          <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M8 7V3m8 4V3m-9 8h.01M11 11h.01M14 11h.01M7 16h.01M10 16h.01M13 16h.01M5 21h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v14a2 2 0 002 2z">
            </path>
          </svg>
          Book Session
        </a></li>
        <li><a href="#" class="nav-link flex items-center p-2 rounded-lg hover:bg-gray-700/50" data-page="resource-hub-page">
          <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M12 6.253v13m0-13C10.832 5.414 9.688 5 8.5 5S6.168 5.414 5 6.253v13C6.168 18.414 7.312 18 8.5 18s2.332.414 3.5 1.253m0-13C13.168 5.414 14.312 5 15.5 5s2.332.414 3.5 1.253v13C17.668 18.414 16.524 18 15.5 18s-2.332.414-3.5 1.253">
            </path>
          </svg>
          Resource Hub
        </a></li>
        <li><a href="#" class="nav-link flex items-center p-2 rounded-lg hover:bg-gray-700/50" data-page="peer-forum-page">
          <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M17 20h-1a1 1 0 01-1-1v-2a1 1 0 011-1h1a1 1 0 011 1v2a1 1 0 01-1 1zm-8 0h-1a1 1 0 01-1-1v-2a1 1 0 011-1h1a1 1 0 011 1v2a1 1 0 01-1 1zm0 0h-1a1 1 0 01-1-1v-2a1 1 0 011-1h1a1 1 0 011 1v2a1 1 0 01-1 1zm8 0h-1a1 1 0 01-1-1v-2a1 1 0 011-1h1a1 1 0 011 1v2a1 1 0 01-1 1zM7 16V9a2 2 0 012-2h6a2 2 0 012 2v7">
            </path>
          </svg>
          Peer Forum
        </a></li>
        <li><a href="#" class="nav-link flex items-center p-2 rounded-lg hover:bg-gray-700/50" data-page="wellness-page">
            <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z">
              </path>
            </svg>
            Wellness
        </a></li>
        <li><a href="#" class="nav-link flex items-center p-2 rounded-lg hover:bg-gray-700/50" data-page="daily-checkin-page">
          <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
          </svg>
          Daily Check-in
        </a></li>
        <li><a href="#" class="nav-link flex items-center p-2 rounded-lg hover:bg-gray-700/50" data-page="login-page">
          <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1">
            </path>
          </svg>
          Login/Signup
        </a></li>
      </ul>
    </nav>
    <div id="admin-link" class="mt-auto hidden md:block">
      <a href="#" class="nav-link flex items-center p-2 rounded-lg hover:bg-gray-700/50" data-page="admin-dashboard-page">
        <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.527.292 1.096.474 1.727.509a1.724 1.724 0 002.572-1.065z">
          </path>
        </svg>
        Admin Dashboard
      </a>
    </div>
  </aside>

  <main id="main-content" class="flex-1 p-8 overflow-y-auto">
    <div id="home-page" class="page">
      <h1 class="text-4xl font-bold main-text mb-8">Welcome to CampusCare</h1>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
        <div class="bg-white p-6 rounded-xl card-shadow border-2 main-border">
          <h3 class="text-2xl font-semibold main-text mb-2">AI-guided Chat</h3>
          <p class="text-gray-600 mb-4">Get quick tips and support from our AI assistant.</p>
          <button id="start-chat-btn" class="main-bg text-white px-6 py-3 rounded-lg shadow-md hover:bg-opacity-90">Start Chat</button>
        </div>
        <div class="bg-white p-6 rounded-xl card-shadow border-2 main-border">
          <h3 class="text-2xl font-semibold main-text mb-2">Book a Session</h3>
          <p class="text-gray-600 mb-4">Schedule a confidential session with a counselor.</p>
          <button id="book-session-btn" class="main-bg text-white px-6 py-3 rounded-lg shadow-md hover:bg-opacity-90">Book Now</button>
        </div>
        <div class="bg-white p-6 rounded-xl card-shadow border-2 main-border">
          <h3 class="text-2xl font-semibold main-text mb-2">Resource Hub</h3>
          <p class="text-gray-600 mb-4">Explore articles, videos, and guides for well-being.</p>
          <button id="explore-resources-btn" class="main-bg text-white px-6 py-3 rounded-lg shadow-md hover:bg-opacity-90">Explore</button>
        </div>
      </div>
      
      <!-- Small Daily Check-in section on Home Page -->
      <div class="bg-white p-6 rounded-xl card-shadow border-2 main-border mb-12">
        <h3 class="text-2xl font-semibold main-text mb-4">Daily Mood Check-In</h3>
        <p class="text-gray-600 mb-4">How are you feeling today?</p>
        <div class="flex space-x-4">
          <button aria-label="Feeling happy" class="bg-gray-100 p-4 rounded-full text-4xl hover:bg-gray-200 checkin-emoji" data-emoji="😊">😊</button>
          <button aria-label="Feeling neutral" class="bg-gray-100 p-4 rounded-full text-4xl hover:bg-gray-200 checkin-emoji" data-emoji="😐">😐</button>
          <button aria-label="Feeling sad" class="bg-gray-100 p-4 rounded-full text-4xl hover:bg-gray-200 checkin-emoji" data-emoji="😔">😔</button>
        </div>
        <div class="mt-6 text-center">
            <p class="text-gray-600 mb-2">Want to track your mood over time?</p>
            <button id="checkin-now-btn" class="main-bg text-white px-6 py-3 rounded-lg shadow-md hover:bg-opacity-90">Check-in Now</button>
        </div>
      </div>

      <div class="bg-white p-6 rounded-xl card-shadow border-2 main-border">
        <p class="text-xl italic text-gray-700">"The greatest wealth is health."</p>
        <p class="text-right text-gray-500">- Virgil</p>
      </div>
      <div class="mt-8">
        <button id="account-btn" class="bg-gray-200 text-gray-700 px-6 py-3 rounded-lg shadow-md hover:bg-gray-300">
          <svg class="w-5 h-5 inline-block mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z">
            </path>
          </svg>
          Account
        </button>
      </div>
    </div>

    <div id="ai-chat-page" class="page hidden flex flex-col h-full">
      <h1 class="text-4xl font-bold main-text mb-6">AI-guided Chat</h1>
      <div id="chat-container" class="flex-1 bg-white p-6 rounded-xl card-shadow border-2 main-border mb-4 overflow-y-auto chat-container">
        <div class="flex justify-start mb-4">
          <div class="main-bg text-white p-3 rounded-lg max-w-xs">
            Hello, I am CampusCare's AI assistant. I'm here to provide support and information. How are you feeling today?
          </div>
        </div>
      </div>
      <form id="ai-chat-form" class="flex">
        <input id="chat-input" type="text"
          class="flex-1 p-3 border-2 main-border rounded-l-lg focus:outline-none"
          placeholder="Type your message...">
        <button type="submit"
          class="main-bg text-white px-6 py-3 rounded-r-lg hover:bg-opacity-90">Send</button>
      </form>
      <button id="emergency-help-button" class="emergency-button mt-4 p-4 rounded-xl shadow-md font-bold">Emergency Help</button>
    </div>

    <div id="daily-checkin-page" class="page hidden">
      <h1 class="text-4xl font-bold main-text mb-6">Daily Mood Check-In</h1>
      <div class="bg-white p-6 rounded-xl card-shadow border-2 main-border mb-8">
        <p class="text-gray-600 mb-4">How are you feeling today? Tap to check in.</p>
        <div class="flex space-x-4 mb-4">
          <button aria-label="Feeling happy" class="bg-gray-100 p-4 rounded-full text-4xl hover:bg-gray-200 checkin-emoji" data-emoji="😊">😊</button>
          <button aria-label="Feeling neutral" class="bg-gray-100 p-4 rounded-full text-4xl hover:bg-gray-200 checkin-emoji" data-emoji="😐">😐</button>
          <button aria-label="Feeling sad" class="bg-gray-100 p-4 rounded-full text-4xl hover:bg-gray-200 checkin-emoji" data-emoji="😔">😔</button>
          <button aria-label="Feeling angry" class="bg-gray-100 p-4 rounded-full text-4xl hover:bg-gray-200 checkin-emoji" data-emoji="😠">😠</button>
          <button aria-label="Feeling calm" class="bg-gray-100 p-4 rounded-full text-4xl hover:bg-gray-200 checkin-emoji" data-emoji="😌">😌</button>
        </div>
        <textarea id="checkin-note" class="w-full p-3 border main-border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" rows="3" placeholder="Describe your feeling further and explain the reason behind it"></textarea>
        <button id="submit-checkin-btn" class="main-bg text-white px-6 py-3 rounded-lg shadow-md hover:bg-opacity-90 mt-4">Submit Check-in</button>
      </div>

      <div class="bg-white p-6 rounded-xl card-shadow border-2 main-border">
        <h2 class="text-2xl font-semibold main-text mb-4">Your Daily Streak</h2>
        <p class="text-gray-600 mb-4">Keep your streak going to build a habit of self-reflection!</p>
        <div class="flex items-center justify-between mb-4">
            <button id="streak-prev-month" class="main-bg text-white px-4 py-2 rounded-lg hover:bg-opacity-90">&lt;</button>
            <h3 id="streak-current-month-year" class="text-xl font-semibold"></h3>
            <button id="streak-next-month" class="main-bg text-white px-4 py-2 rounded-lg hover:bg-opacity-90">&gt;</button>
          </div>
          <div class="calendar-grid text-sm text-gray-500 mb-2">
            <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
          </div>
          <div id="streak-calendar-days" class="calendar-grid"></div>
      </div>
    </div>

    <div id="message-box" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50">
      <div class="bg-white p-8 rounded-xl card-shadow max-w-md w-full border-2 main-border">
        <h2 class="text-2xl font-bold mb-4 main-text">Crisis Support</h2>
        <p class="text-gray-700 mb-6">If you are in immediate danger or a crisis situation, please contact one of the following emergency services:</p>
        <ul class="list-disc list-inside space-y-2 mb-6 text-gray-600">
          <li><b>Kiran Mental Health Helpline (India):</b> 1800-599-0019</li>
          <li><b>AASRA Helpline (India):</b> +91-9820466726</li>
        </ul>
        <div class="flex justify-end">
          <button id="close-message-box"
            class="main-bg text-white px-6 py-3 rounded-lg shadow-md hover:bg-opacity-90">Close</button>
        </div>
      </div>
    </div>

    <div id="book-session-page" class="page hidden">
      <h1 class="text-4xl font-bold main-text mb-6">Book a Session</h1>
      <div class="bg-white p-8 rounded-xl card-shadow border-2 main-border flex flex-col md:flex-row gap-8">
        <!-- Calendar and Booking Form -->
        <div class="flex-1">
          <h2 class="text-xl font-semibold main-text mb-4">Book a New Session</h2>
          <div class="flex items-center justify-between mb-4">
            <button id="prev-month" class="main-bg text-white px-4 py-2 rounded-lg hover:bg-opacity-90">&lt;</button>
            <h3 id="current-month-year" class="text-xl font-semibold"></h3>
            <button id="next-month" class="main-bg text-white px-4 py-2 rounded-lg hover:bg-opacity-90">&gt;</button>
          </div>
          <div class="calendar-grid text-sm text-gray-500 mb-2">
            <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
          </div>
          <div id="calendar-days" class="calendar-grid"></div>
          <form id="booking-form" class="mt-8">
            <div class="mb-4">
              <label for="booking-date" class="block text-gray-700 font-medium mb-1">Selected Date:</label>
              <input type="text" id="booking-date" readonly class="w-full p-2 border main-border rounded-lg bg-gray-100">
            </div>
            <div class="mb-4">
              <label for="booking-time" class="block text-gray-700 font-medium mb-1">Time Slot:</label>
              <select id="booking-time" class="w-full p-2 border main-border rounded-lg">
                <option value="">Select a time</option>
                <option value="09:00">09:00 AM</option>
                <option value="10:00">10:00 AM</option>
                <option value="11:00">11:00 AM</option>
                <option value="12:00">12:00 PM</option>
                <option value="14:00">02:00 PM</option>
                <option value="15:00">03:00 PM</option>
                <option value="16:00">04:00 PM</option>
              </select>
            </div>
            <div class="mb-4">
              <label for="booking-note" class="block text-gray-700 font-medium mb-1">Reason for Session (optional):</label>
              <textarea id="booking-note" rows="3" class="w-full p-2 border main-border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"></textarea>
            </div>
            <button type="submit" id="book-session-btn" class="main-bg text-white w-full p-3 rounded-lg hover:bg-opacity-90">Confirm Booking</button>
          </form>
        </div>
        <!-- Upcoming Sessions -->
        <div class="flex-1">
          <h2 class="text-xl font-semibold main-text mb-4">Your Upcoming Sessions</h2>
          <div id="upcoming-sessions" class="space-y-4">
            <p class="text-gray-500 italic">No upcoming sessions. Book your first one!</p>
          </div>
        </div>
      </div>
    </div>
    
    <div id="login-page" class="page hidden flex flex-col items-center justify-center h-full">
      <div class="bg-white p-8 rounded-xl card-shadow border-2 main-border max-w-lg w-full">
        <h1 class="text-3xl font-bold main-text mb-6 text-center" id="login-title">Account Login</h1>
        
        <!-- Role Selection -->
        <div class="flex flex-col mb-6">
          <label class="block text-gray-700 font-medium mb-2">Select your role:</label>
          <div class="flex justify-around space-x-2">
            <label class="flex-1 text-center bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200">
              <input type="radio" name="role" value="student" class="mr-2" checked>Student
            </label>
            <label class="flex-1 text-center bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200">
              <input type="radio" name="role" value="moderator" class="mr-2">Moderator
            </label>
            <label class="flex-1 text-center bg-gray-100 p-3 rounded-lg cursor-pointer hover:bg-gray-200">
              <input type="radio" name="role" value="admin" class="mr-2">Admin
            </label>
          </div>
        </div>

        <!-- Login Form -->
        <form id="login-form" class="space-y-4">
          <div>
            <label for="login-email" class="block text-gray-700 font-medium mb-1">Email</label>
            <input type="email" id="login-email" class="w-full p-3 border main-border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="Enter your email">
          </div>
          <div>
            <label for="login-password" class="block text-gray-700 font-medium mb-1">Password</label>
            <input type="password" id="login-password" class="w-full p-3 border main-border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="Enter your password">
          </div>
          <button type="submit" class="main-bg text-white w-full p-3 rounded-lg hover:bg-opacity-90">Login</button>
        </form>

        <!-- Signup Form -->
        <form id="signup-form" class="space-y-4 hidden">
          <div>
            <label for="signup-email" class="block text-gray-700 font-medium mb-1">Email</label>
            <input type="email" id="signup-email" class="w-full p-3 border main-border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="Enter your email">
          </div>
          <div>
            <label for="signup-password" class="block text-gray-700 font-medium mb-1">Password</label>
            <input type="password" id="signup-password" class="w-full p-3 border main-border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="Create a password">
          </div>
          <button type="submit" class="main-bg text-white w-full p-3 rounded-lg hover:bg-opacity-90">Sign Up</button>
        </form>

        <div class="mt-4 text-center">
          <p class="text-sm text-gray-500">
            Don't have an account? <a href="#" id="show-signup" class="main-text font-semibold hover:underline">Sign Up</a>
          </p>
          <p class="text-sm text-gray-500 hidden" id="show-login-link">
            Already have an account? <a href="#" id="show-login" class="main-text font-semibold hover:underline">Log In</a>
          </p>
        </div>
      </div>
    </div>


    <div id="resource-hub-page" class="page hidden">
      <h1 class="text-4xl font-bold main-text mb-6">Resource Hub</h1>
      <div class="bg-white p-8 rounded-xl card-shadow border-2 main-border">
        <p class="text-gray-600 mb-6">Explore our curated collection of resources for well-being. We've handpicked some of the most helpful and informative content to support your mental and emotional health journey.</p>
        
        <div class="mb-6">
          <h2 class="text-2xl font-semibold main-text mb-4">Video Recommendation of the Day</h2>
          <img src="https://placehold.co/400x200/6B46C1/FFFFFF?text=Video+Preview" alt="Video Preview" class="w-full h-auto rounded-lg shadow-md mb-2" />
          <a href="https://youtu.be/ZQUxL4Jm1Lo?si=h97KnsNyu4E9z3O3" target="_blank" class="text-blue-600 hover:underline">https://youtu.be/ZQUxL4Jm1Lo?si=h97KnsNyu4E9z3O3</a>
        </div>
        
        <div class="mb-6">
          <h2 class="text-2xl font-semibold main-text mb-4">Article Recommendation of the Day</h2>
          <img src="https://placehold.co/400x200/6B46C1/FFFFFF?text=Article+Preview" alt="Article Preview" class="w-full h-auto rounded-lg shadow-md mb-2" />
          <a href="https://magazine.columbia.edu/article/best-way-stop-negative-thought-spiral" target="_blank" class="text-blue-600 hover:underline">https://magazine.columbia.edu/article/best-way-stop-negative-thought-spiral</a>
        </div>
        
        <div>
          <h2 class="text-2xl font-semibold main-text mb-4">App Recommendation of the Day</h2>
          <img src="https://placehold.co/400x200/6B46C1/FFFFFF?text=App+Preview" alt="App Preview" class="w-full h-auto rounded-lg shadow-md mb-2" />
          <a href="https://play.google.com/store/apps/details?id=com.underthing.focus.friend&pcampaignid=web_share" target="_blank" class="text-blue-600 hover:underline">https://play.google.com/store/apps/details?id=com.underthing.focus.friend&pcampaignid=web_share</a>
        </div>
        
      </div>
    </div>

    <div id="peer-forum-page" class="page hidden">
      <h1 class="text-4xl font-bold main-text mb-6">Peer Support Forum</h1>
      <div class="bg-white p-8 rounded-xl card-shadow border-2 main-border">
        <p class="text-gray-600 mb-4">This page would feature a moderated forum where students can connect with and support each other.</p>
        <p class="text-gray-500 italic">**Backend Required:** This feature needs a database to store user posts, comments, and handle moderation.</p>
      </div>
    </div>

    <div id="wellness-page" class="page hidden">
      <h1 class="text-4xl font-bold main-text mb-6">Wellness Corner</h1>
      <div class="bg-white p-8 rounded-xl card-shadow border-2 main-border">
        <p class="text-gray-600 mb-4">This page is dedicated to holistic well-being, featuring healthy recipes and wellness tips.</p>
        <p class="text-gray-500 italic">**Content:** Add sections for healthy recipes, fitness tips, and mindfulness exercises.</p>
      </div>
    </div>

    <div id="admin-dashboard-page" class="page hidden">
      <h1 class="text-4xl font-bold main-text mb-6">Admin Dashboard</h1>
      <div class="bg-white p-8 rounded-xl card-shadow border-2 main-border">
        <p class="text-gray-600 mb-4">This page would be an analytics dashboard for administrators to monitor user engagement and resource usage.</p>
        <p class="text-gray-500 italic">**Backend Required:** This feature needs a system to collect, process, and visualize user data.</p>
      </div>
    </div>

    <div id="success-modal" class="hidden message-modal-bg fixed inset-0 flex items-center justify-center z-50">
      <div class="bg-white p-8 rounded-xl card-shadow max-w-md w-full border-2 main-border">
        <h2 class="text-2xl font-bold mb-4 main-text">Success!</h2>
        <p class="text-gray-700 mb-6" id="success-message"></p>
        <div class="flex justify-end">
          <button id="close-success-modal" class="main-bg text-white px-6 py-3 rounded-lg shadow-md hover:bg-opacity-90">Close</button>
        </div>
      </div>
    </div>

    <div id="error-modal" class="hidden message-modal-bg fixed inset-0 flex items-center justify-center z-50">
      <div class="bg-white p-8 rounded-xl card-shadow max-w-md w-full border-2 border-red-500">
        <h2 class="text-2xl font-bold mb-4 text-red-500">Booking Failed</h2>
        <p class="text-gray-700 mb-6" id="error-message"></p>
        <div class="flex justify-end">
          <button id="close-error-modal" class="bg-red-500 text-white px-6 py-3 rounded-lg shadow-md hover:bg-red-600">Close</button>
        </div>
      </div>
    </div>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const navLinks = document.querySelectorAll('#sidebar .nav-link');
      const pages = document.querySelectorAll('#main-content .page');
      const aiChatForm = document.getElementById('ai-chat-form');
      const chatContainer = document.getElementById('chat-container');
      const chatInput = document.getElementById('chat-input');
      const messageBox = document.getElementById('message-box');
      const closeMessageBox = document.getElementById('close-message-box');
      const emergencyHelpButton = document.getElementById('emergency-help-button');
      
      const toggleMenuBtn = document.getElementById('toggle-menu');
      const navMenu = document.getElementById('nav-menu');
      
      const startChatBtn = document.getElementById('start-chat-btn');
      const bookSessionBtn = document.getElementById('book-session-btn');
      const exploreResourcesBtn = document.getElementById('explore-resources-btn');
      const accountBtn = document.getElementById('account-btn');
      const checkinNowBtn = document.getElementById('checkin-now-btn');
      const dailyCheckinEmojis = document.querySelectorAll('.checkin-emoji');
      const dailyCheckinNote = document.getElementById('checkin-note');
      const submitCheckinBtn = document.getElementById('submit-checkin-btn');

      const loginForm = document.getElementById('login-form');
      const signupForm = document.getElementById('signup-form');
      const showSignupLink = document.getElementById('show-signup');
      const showLoginLink = document.getElementById('show-login-link');
      const showLoginBtn = document.getElementById('show-login');
      const loginTitle = document.getElementById('login-title');

      toggleMenuBtn.addEventListener('click', () => {
        navMenu.classList.toggle('hidden');
      });

      function showPage(pageId) {
        pages.forEach(page => {
          page.classList.add('hidden');
        });
        document.getElementById(pageId).classList.remove('hidden');
        if (window.innerWidth < 768) {
          navMenu.classList.add('hidden');
        }
      }

      navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
          e.preventDefault();
          const pageId = e.currentTarget.dataset.page;
          showPage(pageId);
        });
      });

      // Event listeners for the home page buttons
      startChatBtn.addEventListener('click', () => showPage('ai-chat-page'));
      bookSessionBtn.addEventListener('click', () => showPage('book-session-page'));
      exploreResourcesBtn.addEventListener('click', () => showPage('resource-hub-page'));
      accountBtn.addEventListener('click', () => showPage('login-page'));
      checkinNowBtn.addEventListener('click', () => showPage('daily-checkin-page'));


      aiChatForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const userMessage = chatInput.value.trim();
        if (userMessage) {
          const userMessageDiv = document.createElement('div');
          userMessageDiv.className = 'flex justify-end mb-4';
          userMessageDiv.innerHTML = `<div class="bg-gray-200 text-gray-800 p-3 rounded-lg max-w-xs">${userMessage}</div>`;
          chatContainer.appendChild(userMessageDiv);

          const aiLoadingDiv = document.createElement('div');
          aiLoadingDiv.className = 'flex justify-start mb-4';
          aiLoadingDiv.innerHTML = `<div class="main-bg text-white p-3 rounded-lg max-w-xs animate-pulse">Thinking...</div>`;
          chatContainer.appendChild(aiLoadingDiv);
          chatContainer.scrollTop = chatContainer.scrollHeight;

          try {
            const systemPrompt = "You are a supportive and empathetic AI assistant for a student wellness platform. Your goal is to provide helpful, general advice and guidance on topics like stress, time management, and mental well-being. Always maintain a kind and encouraging tone. Do not give medical advice.";
            const userQuery = userMessage;
            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
            const payload = {
              contents: [{ parts: [{ text: userQuery }] }],
              tools: [{ "google_search": {} }],
              systemInstruction: {
                parts: [{ text: systemPrompt }]
              },
            };
            
            let retryCount = 0;
            const maxRetries = 3;
            let response;
            while(retryCount < maxRetries) {
              try {
                response = await fetch(apiUrl, {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify(payload)
                });
                if (response.status !== 429) break;
                retryCount++;
                const delay = Math.pow(2, retryCount) * 1000;
                await new Promise(resolve => setTimeout(resolve, delay));
              } catch(e) {
                retryCount++;
                const delay = Math.pow(2, retryCount) * 1000;
                await new Promise(resolve => setTimeout(resolve, delay));
              }
            }
            
            if (!response || !response.ok) {
              throw new Error('API call failed');
            }

            const data = await response.json();
            const reply = data.candidates?.[0]?.content?.parts?.[0]?.text || "Sorry, I couldn’t generate a response.";

            aiLoadingDiv.remove();
            const aiMessageDiv = document.createElement('div');
            aiMessageDiv.className = 'flex justify-start mb-4';
            aiMessageDiv.innerHTML = `<div class="main-bg text-white p-3 rounded-lg max-w-xs">${reply}</div>`;
            chatContainer.appendChild(aiMessageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;

          } catch (error) {
            console.error("Gemini API Error:", error);
            aiLoadingDiv.remove();
            const aiMessageDiv = document.createElement('div');
            aiMessageDiv.className = 'flex justify-start mb-4';
            aiMessageDiv.innerHTML = `<div class="main-bg text-white p-3 rounded-lg max-w-xs">I'm sorry, I'm having trouble connecting right now. Please try again in a moment.</div>`;
            chatContainer.appendChild(aiMessageDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;
          }

          chatInput.value = '';
        }
      });

      emergencyHelpButton.addEventListener('click', () => {
        messageBox.classList.remove('hidden');
      });

      closeMessageBox.addEventListener('click', () => {
        messageBox.classList.add('hidden');
      });

      // Login/Signup functionality
      showSignupLink.addEventListener('click', (e) => {
        e.preventDefault();
        loginForm.classList.add('hidden');
        signupForm.classList.remove('hidden');
        loginTitle.textContent = "Account Signup";
        showSignupLink.classList.add('hidden');
        showLoginLink.classList.remove('hidden');
      });

      showLoginBtn.addEventListener('click', (e) => {
        e.preventDefault();
        signupForm.classList.add('hidden');
        loginForm.classList.remove('hidden');
        loginTitle.textContent = "Account Login";
        showSignupLink.classList.remove('hidden');
        showLoginLink.classList.add('hidden');
      });

      // Handle form submissions (front-end only)
      loginForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const role = document.querySelector('input[name="role"]:checked').value;
        const email = document.getElementById('login-email').value;
        document.getElementById('success-message').textContent = `Login as a ${role} with email ${email} is a success! (This is a front-end demo; no data has been saved.)`;
        successModal.classList.remove('hidden');
        loginForm.reset();
      });

      signupForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const role = document.querySelector('input[name="role"]:checked').value;
        const email = document.getElementById('signup-email').value;
        document.getElementById('success-message').textContent = `Account created for ${email} as a ${role}! (This is a front-end demo; no data has been saved.)`;
        successModal.classList.remove('hidden');
        signupForm.reset();
        showLoginBtn.click();
      });


      showPage('home-page');
      
      const bookingForm = document.getElementById('booking-form');
      const calendarDays = document.getElementById('calendar-days');
      const currentMonthYear = document.getElementById('current-month-year');
      const prevMonthBtn = document.getElementById('prev-month');
      const nextMonthBtn = document.getElementById('next-month');
      const bookingDateInput = document.getElementById('booking-date');
      const upcomingSessionsContainer = document.getElementById('upcoming-sessions');
      const successModal = document.getElementById('success-modal');
      const errorModal = document.getElementById('error-modal');
      const closeSuccessModal = document.getElementById('close-success-modal');
      const closeErrorModal = document.getElementById('close-error-modal');

      let selectedDate = null;
      let currentDate = new Date();
      
      function renderCalendar() {
        const firstDay = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);
        const lastDay = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0);
        
        currentMonthYear.textContent = firstDay.toLocaleString('default', { month: 'long', year: 'numeric' });
        calendarDays.innerHTML = '';
        
        const startingDayOfWeek = firstDay.getDay();
        for(let i = 0; i < startingDayOfWeek; i++) {
          const emptyDay = document.createElement('div');
          calendarDays.appendChild(emptyDay);
        }

        for(let i = 1; i <= lastDay.getDate(); i++) {
          const dayEl = document.createElement('div');
          dayEl.className = 'calendar-day bg-gray-100 cursor-pointer transition-all hover:bg-gray-200';
          dayEl.textContent = i;
          dayEl.dataset.day = i;
          
          const dayDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), i);
          dayEl.addEventListener('click', () => {
            selectedDate = dayDate;
            bookingDateInput.value = selectedDate.toDateString();
            document.querySelectorAll('.calendar-day').forEach(d => d.classList.remove('selected'));
            dayEl.classList.add('selected');
          });
          calendarDays.appendChild(dayEl);
        }
      }

      prevMonthBtn.addEventListener('click', () => {
        currentDate.setMonth(currentDate.getMonth() - 1);
        renderCalendar();
      });

      nextMonthBtn.addEventListener('click', () => {
        currentDate.setMonth(currentDate.getMonth() + 1);
        renderCalendar();
      });

      bookingForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const bookingTime = document.getElementById('booking-time').value;
        const bookingNote = document.getElementById('booking-note').value;
        
        if (!selectedDate || !bookingTime) {
          document.getElementById('error-message').textContent = "Please select a date and time for your session.";
          errorModal.classList.remove('hidden');
          return;
        }

        document.getElementById('success-message').textContent = `Booking for ${selectedDate.toDateString()} at ${bookingTime} is confirmed. This is a front-end demo; no data has been saved.`;
        successModal.classList.remove('hidden');
        bookingForm.reset();
        selectedDate = null;
        document.querySelectorAll('.calendar-day').forEach(d => d.classList.remove('selected'));
        renderCalendar();
      });
      
      closeSuccessModal.addEventListener('click', () => successModal.classList.add('hidden'));
      closeErrorModal.addEventListener('click', () => errorModal.classList.add('hidden'));
      
      // Since Firebase is removed, we just show a static message
      upcomingSessionsContainer.innerHTML = '<p class="text-gray-500 italic">No upcoming sessions. Book your first one!</p>';
      
      renderCalendar();

      // Daily Check-in Functionality
      let selectedEmoji = null;
      dailyCheckinEmojis.forEach(btn => {
        btn.addEventListener('click', () => {
          dailyCheckinEmojis.forEach(emojiBtn => emojiBtn.classList.remove('bg-gray-200'));
          btn.classList.add('bg-gray-200');
          selectedEmoji = btn.dataset.emoji;
        });
      });

      // Dummy data for daily streak, representing checked-in days
      const checkedInDays = [5, 6, 8, 9, 10, 12, 13, 15, 16, 17, 20, 21, 23, 24, 25]; 

      let streakDate = new Date();
      function renderStreakCalendar() {
        const firstDay = new Date(streakDate.getFullYear(), streakDate.getMonth(), 1);
        const lastDay = new Date(streakDate.getFullYear(), streakDate.getMonth() + 1, 0);
        
        document.getElementById('streak-current-month-year').textContent = firstDay.toLocaleString('default', { month: 'long', year: 'numeric' });
        const streakCalendarDays = document.getElementById('streak-calendar-days');
        streakCalendarDays.innerHTML = '';
        
        const startingDayOfWeek = firstDay.getDay();
        for(let i = 0; i < startingDayOfWeek; i++) {
          const emptyDay = document.createElement('div');
          streakCalendarDays.appendChild(emptyDay);
        }

        for(let i = 1; i <= lastDay.getDate(); i++) {
          const dayEl = document.createElement('div');
          dayEl.className = 'calendar-day bg-gray-100';
          dayEl.textContent = i;
          
          if (checkedInDays.includes(i)) {
            dayEl.classList.add('checked-in-day');
          }
          streakCalendarDays.appendChild(dayEl);
        }
      }

      document.getElementById('streak-prev-month').addEventListener('click', () => {
        streakDate.setMonth(streakDate.getMonth() - 1);
        renderStreakCalendar();
      });

      document.getElementById('streak-next-month').addEventListener('click', () => {
        streakDate.setMonth(streakDate.getMonth() + 1);
        renderStreakCalendar();
      });

      submitCheckinBtn.addEventListener('click', () => {
        const note = dailyCheckinNote.value.trim();
        if (selectedEmoji || note) {
          document.getElementById('success-message').textContent = 'Your daily check-in has been submitted!';
          successModal.classList.remove('hidden');
          // This is a placeholder for real functionality
          console.log('Daily Check-in Submitted:', {
            emoji: selectedEmoji,
            note: note,
            date: new Date().toISOString()
          });
          dailyCheckinNote.value = '';
          dailyCheckinEmojis.forEach(btn => btn.classList.remove('bg-gray-200'));
          selectedEmoji = null;
          // For the demo, simulate adding today's date to the streak
          checkedInDays.push(new Date().getDate());
          renderStreakCalendar();
        } else {
          document.getElementById('error-message').textContent = "Please select an emoji or write a note to check in.";
          errorModal.classList.remove('hidden');
        }
      });

      renderStreakCalendar();
    });
  </script>
</body>
</html>